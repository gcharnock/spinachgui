<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>cspinach: /home/gareth/src/cspinich/wxSpinach/shared/matlab_dlls/SpinCalc.m File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>/home/gareth/src/cspinich/wxSpinach/shared/matlab_dlls/SpinCalc.m File Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">id&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#fb0c4e523f27f4e01f15b918e24c1a56">follows:NOTE:Output:follows:</a> (near singularities flags,[NOTE] id orientations,[Output] id as,[follows] lower(CONVERSION to)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">end end if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#da254848c3bbd417a742165bb1fc4adb">abs</a> (det(INPUT(:,:, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>))+1)&lt; 0.05</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">'Error:Input DCM(s&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#63d674a2e1704413a0bcf7ced67825e4">improper</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">end if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#ebfa851c8af58da8bc15ed6634c8d1cf">errordlg</a> ('Warning:Input DCM matrix determinant(s) off from 1 by more than tolerance.') end end <a class="el" href="SpinCalc_8m.html#d56fd1f2de63b3ed9296d2aba8074442">DCM_flag</a>=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if for for for if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#f3f46933dc5e07a176551ddbac84b343">perturbed</a> (<a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>, <a class="el" href="SpinCalc_8m.html#0ed892381b3cada12b0cb806289d0aef">jj</a>, <a class="el" href="SpinCalc_8m.html#e9c83588c3b519e86d31c2d977ce16dc">kk</a>)&gt;<a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">end end end end if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#859fe483ef1b2cb3b60c8c45ad4fd749">fprintf</a> ('Warning:Input DCM(s) matrix not orthogonal to precision tolerance.') end end clear perturbed <a class="el" href="SpinCalc_8m.html#d56fd1f2de63b3ed9296d2aba8074442">DCM_flag</a> Q</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#bb6964066c60f067a5ee07f270875a3f">denom</a> (1)=0.5 *sqrt(1+INPUT(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">3, 3, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#15ed543820920ab86d1ddff006bdc6ce">INPUT</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#9e13f886b6a2de520743dd5e16115147">denom</a> (2)=0.5 *sqrt(1-INPUT(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#04813cf339ec650df5c9d71ea952b29d">denom</a> (3)=0.5 *sqrt(1-INPUT(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#cf151f23195d5dc70f433f980784c60c">denom</a> (4)=0.5 *sqrt(1+INPUT(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">determine which Q equations <br>
maximize denominator switch&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#7bd20913ef58008a1f29aa529d092307">find</a> (denom==max(denom), 1,'first')%determines max value of qtests to put in denominator case 1 Q(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#0d12ab88a44c946c6ddc0fe2dc078b00">Q</a> (2, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#849929119f05c22867a5a240d8a907f8">Q</a> (3, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#8c8de8cd2cac52cc0a0f93f7eb33710b">Q</a> (4, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#8df71f6833fa784eae6b623e79dc13af">Q</a> (1, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">clear denom case EV Euler <br>
<a class="el" href="classVector.html">Vector</a> Input <a class="el" href="classType.html">Type</a> if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#866ab28a6820ec61ca04ff96cca4096b">size</a> (INPUT, 2)~</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">assign mu name for clarity if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#f544559f74ca73ba8fb38244ebdd9655">sqrt</a> (INPUT(:, 1).^2+INPUT(:, 2).^2+INPUT(:, 3).^2)-ones(<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">assign mu name for clarity if <a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#d4ed113be2b2780aa4d23d07a6a03ac5">ones</a> (<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a>, 1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">assign mu name for clarity if <br>
<a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a> *check that input m s <br>
constitute unit vector&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#50f7869e996fc52acbac674b8352aed2">error</a> ('Input euler vector(s) components do not constitute a unit vector') end if <a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a>&lt; zeros(<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">assign mu name for clarity if <br>
<a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a> *check that input m s <br>
constitute unit vector <a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a> *pi <br>
*check if rotation about euler <br>
vector is between and&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#69f5ecef6ec83bdfd5a4f986a96a3b7a">error</a> ('Input euler rotation angle(s) not between 0 and 360 degrees') end Q</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">psi./2&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#6758ec9ad92579b01e5948ed8517b2c8">cos</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">else&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#88fdf02949935c7dc69dd9fcca277904">error</a> ('Error:Invalid input Euler angle order type(conversion string)')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">number of orientations if if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#69e3f9f94a81ed53410c3dcee6c5869d">abs</a> (sqrt(INPUT(:, 1).^2+INPUT(:, 2).^2+INPUT(:, 3).^2+INPUT(:, 4).^2)-ones(<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a>, 1))&gt;<a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a> *ones(<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">number of orientations if if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#03917dbd55c0ebe6fbff27c52e49d0f6">errordlg</a> ('Warning:Input quaternion norm(s) deviate(s) from unity by more than tolerance') end end Q</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#1caf5889e40550fb9724cdc9036c29eb">Q</a> (1, 1,:).*Q(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">1, 4,:&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#e2c028f23edf3907aca571aa03060318">Q</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#30f67a0432dd41ea1f574ab54fa3f55f">Q</a> (1, 2,:).*Q(1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#a28d2b0d7074eec95c9084501f6ca931">sin</a> (<a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a>/2)~</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">for if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#cbebb7fd29c3ba141c66836c9ec7c09d">sin</a> (<a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a>(<a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>, 1)/2)~=0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">for if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#e41672582abde52b1fda6fd69bbcbb68">OUTPUT</a> (<a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>, 1:4)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">else&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#55e4b6a7ded41d706058ec87a097e04f">error</a> ('Error:Invalid output Euler angle order type(conversion string).')</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">function&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#9702a4c625a53d56ec69bc3271cc6d6b">OUTPUT</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">function VA John Fuller nianet <br>
org Version&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#3824dd46422178131ae9ba0950cb6caf">Feb</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a> = size(CONVERSION,2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if <a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a> <a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a>&lt; 4,%no <br>
CONVERSION string can be <br>
shorter than 4 or longer than <br>
12 chars error('Error:Invalid <br>
entry for CONVERSION input <br>
string');endo_type=<a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a>-i_type;if <br>
i_type&lt; 5, i_type=i_type-1;else <br>
i_type=i_type-2;endif o_type<br>
&lt; 5, o_type=o_type-1;else <br>
o_type=o_type-2;endTYPES=cell(1, <br>
4);TYPES{1, 1}='Q';TYPES{1, <br>
2}='EV';TYPES{1, 3}='DCM';TYPES{1, <br>
4}='EA';INPUT_TYPE=TYPES{1, <br>
i_type};OUTPUT_TYPE=TYPES{1, <br>
o_type};clear TYPES%Confirm <br>
input as compared to program <br>
interpretationif i_type~=4 <br>
&amp;&amp;o_type~=4,%if input/output <br>
are NOT Euler angles CC=[INPUT_TYPE,'to', <br>
OUTPUT_TYPE];if strcmpi(CONVERSION, <br>
CC)==0;error('Error:Invalid <br>
entry for CONVERSION input <br>
string');endelse if i_type==4,%if <br>
input type is Euler angles, <br>
determine the order of <br>
rotations <a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>=str2double(CONVERSION(1, <br>
3:5));rot_1_in=floor(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>/100);%first <br>
rotation rot_2_in=floor((<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>-rot_1_in <br>
*100)/10);%second rotation <br>
rot_3_in=(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>-rot_1_in <br>
*100-rot_2_in *10);%third <br>
rotation if rot_1_in<br>
&lt; 1||rot_2_in&lt; 1||rot_3_in<br>
&lt; 1||rot_1_in &gt;3||rot_2_in &gt;<br>
3||rot_3_in &gt;3, error('Error:Invalid <br>
input Euler angle order type(conversion <br>
string).');%check that all <br>
orders are between 1 and <br>
3 elseif rot_1_in==rot_2_in||rot_2_in==rot_3_in, <br>
error('Error:Invalid input <br>
Euler angle order type(conversion <br>
string).');%check that no <br>
2 consecutive orders are equal(invalid) <br>
end%check input dimensions to <br>
be 1x3x1 if size(INPUT, 2)~=3||size(INPUT, 3)~=1 error('Error:Input euler angle data vector is not Nx3') end%verify angles are between 0 and 360 and identify singularities if INPUT(:, 1)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 1)&gt;360 *ones(size(INPUT, 1), 1), error('Error:First input Euler angle(s) outside 0 to 360 degree range') end if rot_1_in==rot_3_in,%Type 2 rotation(first and third rotations about same axis) if INPUT(:, 2)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 2)&gt;180 *ones(size(INPUT, 1), 1),%confirm second angle within range error('Error:Second input Euler angle(s) outside 0 to 180 degree range') elseif abs(INPUT(:, 2))&lt; 2 *ones(size(INPUT, 1), 1)|abs(INPUT(:, 2))&gt;178 *ones(size(INPUT, 1), 1),%check for singularity if ichk==1, errordlg('Warning:Input Euler angle rotation(s) near a singularity.Second angle near 0 or 180 degrees.') end end else%Type 1 rotation(all rotationas about each of three axes) if abs(INPUT(:, 2))&gt;=90 *ones(size(INPUT, 1), 1),%confirm second angle within range error('Error:Second input Euler angle(s) outside-90 to 90 degree range') elseif abs(INPUT(:, 2))&gt;88 *ones(size(INPUT, 1), 1),%check for singularity if ichk==1, errordlg('Warning:Input Euler angle(s) rotation near a singularity.Second angle near-90 or 90 degrees.') end end end if INPUT(:, 3)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 3)&gt;360 *ones(size(INPUT, 1), 1), error('Error:Third input Euler angle(s) outside 0 to 360 degree range') end end if o_type==4,%if output type is Euler angles, determine order of rotations EULER_order_out=str2double(CONVERSION(1, length-2:length));rot_1_out=floor(EULER_order_out/100);%first rotation rot_2_out=floor((EULER_order_out-rot_1_out *100)/10);%second rotation rot_3_out=(EULER_order_out-rot_1_out *100-rot_2_out *10);%third rotation if rot_1_out&lt; 1||rot_2_out&lt; 1||rot_3_out&lt; 1||rot_1_out &gt;3||rot_2_out &gt;3||rot_3_out &gt;3, error('Error:Invalid output Euler angle order type(conversion string).');%check that all orders are between 1 and 3 elseif rot_1_out==rot_2_out||rot_2_out==rot_3_out, error('Error:Invalid output Euler angle order type(conversion string).');%check that no 2 consecutive orders are equal end end if i_type==4 &amp;&amp;o_type~=4,%if input are euler angles but not output CC=&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a> ['EA', num2str(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>),'to', OUTPUT_TYPE];%construct program conversion string for checking against user input elseif o_type==4 &amp;&amp;i_type~=4,%if output are euler angles but not input CC=[INPUT_TYPE,'to','EA', num2str(<a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a>)];%construct program conversion string for checking against user input elseif i_type==4 &amp;&amp;o_type==4,%if both input and output are euler angles CC=['EA', num2str(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>),'to','EA', num2str(<a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a>)];%construct program conversion string end if strcmpi(CONVERSION, CC)==0;%check program conversion string against user input to confirm the conversion command error('Error:Invalid entry for CONVERSION input string');endendclear i_type o_type CC%From the input, determine the quaternions that uniquely describe the%rotation prescribed by that input.The output will be calculated in the%second portion of the code from these quaternions.switch INPUT_TYPE case 'DCM'if size(INPUT, 1)~=3||size(INPUT, 2)~=3%check DCM dimensions error('Error:DCM matrix is not 3x3xN');end N=size(INPUT, 3);%number of orientations%Check if matrix is indeed orthogonal perturbed=NaN(3, 3, N);DCM_flag=0;for ii=1:N, perturbed(:,:, ii)=abs(INPUT(:,:, ii)*INPUT(:,:, ii)'-eye(3));%perturbed array shows difference between DCM *DCM'and I if abs(det(INPUT(:,:, ii))-1)&gt;</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if <a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a> <a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a>&lt; 4,%no <br>
CONVERSION string can be <br>
shorter than 4 or longer than <br>
12 chars error('Error:Invalid <br>
entry for CONVERSION input <br>
string');endo_type=<a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a>-i_type;if <br>
i_type&lt; 5, i_type=i_type-1;else <br>
i_type=i_type-2;endif o_type<br>
&lt; 5, o_type=o_type-1;else <br>
o_type=o_type-2;endTYPES=cell(1, <br>
4);TYPES{1, 1}='Q';TYPES{1, <br>
2}='EV';TYPES{1, 3}='DCM';TYPES{1, <br>
4}='EA';INPUT_TYPE=TYPES{1, <br>
i_type};OUTPUT_TYPE=TYPES{1, <br>
o_type};clear TYPES%Confirm <br>
input as compared to program <br>
interpretationif i_type~=4 <br>
&amp;&amp;o_type~=4,%if input/output <br>
are NOT Euler angles CC=[INPUT_TYPE,'to', <br>
OUTPUT_TYPE];if strcmpi(CONVERSION, <br>
CC)==0;error('Error:Invalid <br>
entry for CONVERSION input <br>
string');endelse if i_type==4,%if <br>
input type is Euler angles, <br>
determine the order of <br>
rotations <a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>=str2double(CONVERSION(1, <br>
3:5));rot_1_in=floor(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>/100);%first <br>
rotation rot_2_in=floor((<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>-rot_1_in <br>
*100)/10);%second rotation <br>
rot_3_in=(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>-rot_1_in <br>
*100-rot_2_in *10);%third <br>
rotation if rot_1_in<br>
&lt; 1||rot_2_in&lt; 1||rot_3_in<br>
&lt; 1||rot_1_in &gt;3||rot_2_in &gt;<br>
3||rot_3_in &gt;3, error('Error:Invalid <br>
input Euler angle order type(conversion <br>
string).');%check that all <br>
orders are between 1 and <br>
3 elseif rot_1_in==rot_2_in||rot_2_in==rot_3_in, <br>
error('Error:Invalid input <br>
Euler angle order type(conversion <br>
string).');%check that no <br>
2 consecutive orders are equal(invalid) <br>
end%check input dimensions to <br>
be 1x3x1 if size(INPUT, 2)~=3||size(INPUT, 3)~=1 error('Error:Input euler angle data vector is not Nx3') end%verify angles are between 0 and 360 and identify singularities if INPUT(:, 1)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 1)&gt;360 *ones(size(INPUT, 1), 1), error('Error:First input Euler angle(s) outside 0 to 360 degree range') end if rot_1_in==rot_3_in,%Type 2 rotation(first and third rotations about same axis) if INPUT(:, 2)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 2)&gt;180 *ones(size(INPUT, 1), 1),%confirm second angle within range error('Error:Second input Euler angle(s) outside 0 to 180 degree range') elseif abs(INPUT(:, 2))&lt; 2 *ones(size(INPUT, 1), 1)|abs(INPUT(:, 2))&gt;178 *ones(size(INPUT, 1), 1),%check for singularity if ichk==1, errordlg('Warning:Input Euler angle rotation(s) near a singularity.Second angle near 0 or 180 degrees.') end end else%Type 1 rotation(all rotationas about each of three axes) if abs(INPUT(:, 2))&gt;=90 *ones(size(INPUT, 1), 1),%confirm second angle within range error('Error:Second input Euler angle(s) outside-90 to 90 degree range') elseif abs(INPUT(:, 2))&gt;88 *ones(size(INPUT, 1), 1),%check for singularity if ichk==1, errordlg('Warning:Input Euler angle(s) rotation near a singularity.Second angle near-90 or 90 degrees.') end end end if INPUT(:, 3)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 3)&gt;360 *ones(size(INPUT, 1), 1), error('Error:Third input Euler angle(s) outside 0 to 360 degree range') end end if o_type==4,%if output type is Euler angles, determine order of rotations EULER_order_out=str2double(CONVERSION(1, length-2:length));rot_1_out=floor(EULER_order_out/100);%first rotation rot_2_out=floor((EULER_order_out-rot_1_out *100)/10);%second rotation rot_3_out=(EULER_order_out-rot_1_out *100-rot_2_out *10);%third rotation if rot_1_out&lt; 1||rot_2_out&lt; 1||rot_3_out&lt; 1||rot_1_out &gt;3||rot_2_out &gt;3||rot_3_out &gt;3, error('Error:Invalid output Euler angle order type(conversion string).');%check that all orders are between 1 and 3 elseif rot_1_out==rot_2_out||rot_2_out==rot_3_out, error('Error:Invalid output Euler angle order type(conversion string).');%check that no 2 consecutive orders are equal end end if i_type==4 &amp;&amp;o_type~=4,%if input are euler angles but not output CC=&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#04d7174125b069e3d35c922196718668">ichk</a> ['EA', num2str(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>),'to', OUTPUT_TYPE];%construct program conversion string for checking against user input elseif o_type==4 &amp;&amp;i_type~=4,%if output are euler angles but not input CC=[INPUT_TYPE,'to','EA', num2str(<a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a>)];%construct program conversion string for checking against user input elseif i_type==4 &amp;&amp;o_type==4,%if both input and output are euler angles CC=['EA', num2str(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>),'to','EA', num2str(<a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a>)];%construct program conversion string end if strcmpi(CONVERSION, CC)==0;%check program conversion string against user input to confirm the conversion command error('Error:Invalid entry for CONVERSION input string');endendclear i_type o_type CC%From the input, determine the quaternions that uniquely describe the%rotation prescribed by that input.The output will be calculated in the%second portion of the code from these quaternions.switch INPUT_TYPE case 'DCM'if size(INPUT, 1)~=3||size(INPUT, 2)~=3%check DCM dimensions error('Error:DCM matrix is not 3x3xN');end N=size(INPUT, 3);%number of orientations%Check if matrix is indeed orthogonal perturbed=NaN(3, 3, N);DCM_flag=0;for ii=1:N, perturbed(:,:, ii)=abs(INPUT(:,:, ii)*INPUT(:,:, ii)'-eye(3));%perturbed array shows difference between DCM *DCM'and I if abs(det(INPUT(:,:, ii))-1)&gt; if determinant is off by one more than user is warned if = =1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if <a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a> <a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a>&lt; 4,%no <br>
CONVERSION string can be <br>
shorter than 4 or longer than <br>
12 chars error('Error:Invalid <br>
entry for CONVERSION input <br>
string');endo_type=<a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a>-i_type;if <br>
i_type&lt; 5, i_type=i_type-1;else <br>
i_type=i_type-2;endif o_type<br>
&lt; 5, o_type=o_type-1;else <br>
o_type=o_type-2;endTYPES=cell(1, <br>
4);TYPES{1, 1}='Q';TYPES{1, <br>
2}='EV';TYPES{1, 3}='DCM';TYPES{1, <br>
4}='EA';INPUT_TYPE=TYPES{1, <br>
i_type};OUTPUT_TYPE=TYPES{1, <br>
o_type};clear TYPES%Confirm <br>
input as compared to program <br>
interpretationif i_type~=4 <br>
&amp;&amp;o_type~=4,%if input/output <br>
are NOT Euler angles CC=[INPUT_TYPE,'to', <br>
OUTPUT_TYPE];if strcmpi(CONVERSION, <br>
CC)==0;error('Error:Invalid <br>
entry for CONVERSION input <br>
string');endelse if i_type==4,%if <br>
input type is Euler angles, <br>
determine the order of <br>
rotations <a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>=str2double(CONVERSION(1, <br>
3:5));rot_1_in=floor(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>/100);%first <br>
rotation rot_2_in=floor((<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>-rot_1_in <br>
*100)/10);%second rotation <br>
rot_3_in=(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>-rot_1_in <br>
*100-rot_2_in *10);%third <br>
rotation if rot_1_in<br>
&lt; 1||rot_2_in&lt; 1||rot_3_in<br>
&lt; 1||rot_1_in &gt;3||rot_2_in &gt;<br>
3||rot_3_in &gt;3, error('Error:Invalid <br>
input Euler angle order type(conversion <br>
string).');%check that all <br>
orders are between 1 and <br>
3 elseif rot_1_in==rot_2_in||rot_2_in==rot_3_in, <br>
error('Error:Invalid input <br>
Euler angle order type(conversion <br>
string).');%check that no <br>
2 consecutive orders are equal(invalid) <br>
end%check input dimensions to <br>
be 1x3x1 if size(INPUT, 2)~=3||size(INPUT, 3)~=1 error('Error:Input euler angle data vector is not Nx3') end%verify angles are between 0 and 360 and identify singularities if INPUT(:, 1)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 1)&gt;360 *ones(size(INPUT, 1), 1), error('Error:First input Euler angle(s) outside 0 to 360 degree range') end if rot_1_in==rot_3_in,%Type 2 rotation(first and third rotations about same axis) if INPUT(:, 2)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 2)&gt;180 *ones(size(INPUT, 1), 1),%confirm second angle within range error('Error:Second input Euler angle(s) outside 0 to 180 degree range') elseif abs(INPUT(:, 2))&lt; 2 *ones(size(INPUT, 1), 1)|abs(INPUT(:, 2))&gt;178 *ones(size(INPUT, 1), 1),%check for singularity if ichk==1, errordlg('Warning:Input Euler angle rotation(s) near a singularity.Second angle near 0 or 180 degrees.') end end else%Type 1 rotation(all rotationas about each of three axes) if abs(INPUT(:, 2))&gt;=90 *ones(size(INPUT, 1), 1),%confirm second angle within range error('Error:Second input Euler angle(s) outside-90 to 90 degree range') elseif abs(INPUT(:, 2))&gt;88 *ones(size(INPUT, 1), 1),%check for singularity if ichk==1, errordlg('Warning:Input Euler angle(s) rotation near a singularity.Second angle near-90 or 90 degrees.') end end end if INPUT(:, 3)&lt; zeros(size(INPUT, 1), 1)|INPUT(:, 3)&gt;360 *ones(size(INPUT, 1), 1), error('Error:Third input Euler angle(s) outside 0 to 360 degree range') end end if o_type==4,%if output type is Euler angles, determine order of rotations EULER_order_out=str2double(CONVERSION(1, length-2:length));rot_1_out=floor(EULER_order_out/100);%first rotation rot_2_out=floor((EULER_order_out-rot_1_out *100)/10);%second rotation rot_3_out=(EULER_order_out-rot_1_out *100-rot_2_out *10);%third rotation if rot_1_out&lt; 1||rot_2_out&lt; 1||rot_3_out&lt; 1||rot_1_out &gt;3||rot_2_out &gt;3||rot_3_out &gt;3, error('Error:Invalid output Euler angle order type(conversion string).');%check that all orders are between 1 and 3 elseif rot_1_out==rot_2_out||rot_2_out==rot_3_out, error('Error:Invalid output Euler angle order type(conversion string).');%check that no 2 consecutive orders are equal end end if i_type==4 &amp;&amp;o_type~=4,%if input are euler angles but not output CC=&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#d56fd1f2de63b3ed9296d2aba8074442">DCM_flag</a> ['EA', num2str(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>),'to', OUTPUT_TYPE];%construct program conversion string for checking against user input elseif o_type==4 &amp;&amp;i_type~=4,%if output are euler angles but not input CC=[INPUT_TYPE,'to','EA', num2str(<a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a>)];%construct program conversion string for checking against user input elseif i_type==4 &amp;&amp;o_type==4,%if both input and output are euler angles CC=['EA', num2str(<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a>),'to','EA', num2str(<a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a>)];%construct program conversion string end if strcmpi(CONVERSION, CC)==0;%check program conversion string against user input to confirm the conversion command error('Error:Invalid entry for CONVERSION input string');endendclear i_type o_type CC%From the input, determine the quaternions that uniquely describe the%rotation prescribed by that input.The output will be calculated in the%second portion of the code from these quaternions.switch INPUT_TYPE case 'DCM'if size(INPUT, 1)~=3||size(INPUT, 2)~=3%check DCM dimensions error('Error:DCM matrix is not 3x3xN');end N=size(INPUT, 3);%number of orientations%Check if matrix is indeed orthogonal perturbed=NaN(3, 3, N);DCM_flag=0;for ii=1:N, perturbed(:,:, ii)=abs(INPUT(:,:, ii)*INPUT(:,:, ii)'-eye(3));%perturbed array shows difference between DCM *DCM'and I if abs(det(INPUT(:,:, ii))-1)&gt; if determinant is off by one more than user is warned if = 1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if for&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#e9c83588c3b519e86d31c2d977ce16dc">kk</a> = 1:<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if for for&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a> = 1:3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if for for for&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#0ed892381b3cada12b0cb806289d0aef">jj</a> = 1:3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">for&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#f7077ea6a64a2c954d88f0e6848ab7f8">denom</a> = NaN(4,1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">end end&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#6a376f3700939431a3e2ff6782e20411">Q</a> = Q'</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a> = INPUT(:,4)*pi/180</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">quaternion clear m1 m2 m3 <a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a> <br>
case EA&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a> = INPUT(:,1)*pi/180</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#ebf487f5d315cb61f0bd86455edff1fd">theta</a> = INPUT(:,2)*pi/180</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a> = INPUT(:,3)*pi/180</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a> = size(INPUT,1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#869bd946456256c347112f5798b5b504">c2</a> = cos(theta./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#2350b882068fe45413b6048893702f73">c3</a> = cos(phi./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#2f07e0f444810cc4e54ee2be2ce0ac65">s1</a> = sin(psi./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#2e63e71737e8b6802b81f6a7c5ca6a0a">s2</a> = sin(theta./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#62909dec3830967c3ffff61bd5d4d3fa">s3</a> = sin(phi./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#c9d7489a5a868e10b10518305e5425be">c13</a> = cos((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>+<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#42f126d3085add50391e5c92018fa2a9">s13</a> = sin((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>+<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#b043e012aa767ed885fcb8f300118085">c1_3</a> = cos((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>-<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#b31f90fe3731073540ea49fe690b5317">s1_3</a> = sin((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>-<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#69fc23ad21ce58652757ec5333cbad09">c3_1</a> = cos((<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>-<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>)./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#cf22383c5c1ea7259855649924a564a6">s3_1</a> = sin((<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>-<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>)./2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a> = =121</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">end clear INPUT INPUT_TYPE <br>
<a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a> Normalize <br>
quaternions in case of <br>
deviation from unity User has <br>
already been warned of <br>
deviation&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#e6f225fa5786243c8621def2bc9d863c">Qnorms</a> = sqrt(sum(Q.*Q,2))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#b6f3c269fc46c9c1c0f81b3431240138">__pad0__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#e31ac69c75bb42f47c8d6a7cde4937c6">__pad1__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#cb405321a5c6ae16fef21290649f2666">__pad2__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#a6f626203c740423c9dfcbbe727f90b4">__pad3__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#a126f02bcfcec342fb72926c73b4aeb3">__pad4__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#445d93e639c02494afbdc5126d1d9f8a">__pad5__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#d918d72d2eac09be60a9fc8847fe31a2">__pad6__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#33068e38fda059166af20232a02d2b55">__pad7__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#5cfbf631ddc94882ec4e9aefed44a536">__pad8__</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">case EA if&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a> = =121</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="69e3f9f94a81ed53410c3dcee6c5869d"></a><!-- doxytag: member="SpinCalc.m::abs" ref="69e3f9f94a81ed53410c3dcee6c5869d" args="(sqrt(INPUT(:, 1).^2+INPUT(:, 2).^2+INPUT(:, 3).^2+INPUT(:, 4).^2)-ones(N, 1))&gt;tol *ones(N" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">number of orientations if if abs           </td>
          <td>(</td>
          <td class="paramtype">sqrt(INPUT(:, 1).^2+INPUT(:, 2).^2+INPUT(:, 3).^2+INPUT(:, 4).^2)-ones(<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a>, 1)&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="da254848c3bbd417a742165bb1fc4adb"></a><!-- doxytag: member="SpinCalc.m::abs" ref="da254848c3bbd417a742165bb1fc4adb" args="(det(INPUT(:,:, ii))+1)&lt; 0.05" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end end if abs           </td>
          <td>(</td>
          <td class="paramtype">det(INPUT(:,:, <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>))+&nbsp;</td>
          <td class="paramname"> <em>1</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6758ec9ad92579b01e5948ed8517b2c8"></a><!-- doxytag: member="SpinCalc.m::cos" ref="6758ec9ad92579b01e5948ed8517b2c8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">psi./2 cos           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="cf151f23195d5dc70f433f980784c60c"></a><!-- doxytag: member="SpinCalc.m::denom" ref="cf151f23195d5dc70f433f980784c60c" args="(4)=0.5 *sqrt(1+INPUT(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">denom           </td>
          <td>(</td>
          <td class="paramtype">4&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="04813cf339ec650df5c9d71ea952b29d"></a><!-- doxytag: member="SpinCalc.m::denom" ref="04813cf339ec650df5c9d71ea952b29d" args="(3)=0.5 *sqrt(1-INPUT(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">denom           </td>
          <td>(</td>
          <td class="paramtype">3&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="9e13f886b6a2de520743dd5e16115147"></a><!-- doxytag: member="SpinCalc.m::denom" ref="9e13f886b6a2de520743dd5e16115147" args="(2)=0.5 *sqrt(1-INPUT(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">denom           </td>
          <td>(</td>
          <td class="paramtype">2&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="bb6964066c60f067a5ee07f270875a3f"></a><!-- doxytag: member="SpinCalc.m::denom" ref="bb6964066c60f067a5ee07f270875a3f" args="(1)=0.5 *sqrt(1+INPUT(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">denom           </td>
          <td>(</td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="55e4b6a7ded41d706058ec87a097e04f"></a><!-- doxytag: member="SpinCalc.m::error" ref="55e4b6a7ded41d706058ec87a097e04f" args="('Error:Invalid output Euler angle order type(conversion string).')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">else error           </td>
          <td>(</td>
          <td class="paramtype">'Error:Invalid output Euler angle order type(conversion string).'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="88fdf02949935c7dc69dd9fcca277904"></a><!-- doxytag: member="SpinCalc.m::error" ref="88fdf02949935c7dc69dd9fcca277904" args="('Error:Invalid input Euler angle order type(conversion string)')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">else error           </td>
          <td>(</td>
          <td class="paramtype">'Error:Invalid input Euler angle order type(conversion string)'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="69f5ecef6ec83bdfd5a4f986a96a3b7a"></a><!-- doxytag: member="SpinCalc.m::error" ref="69f5ecef6ec83bdfd5a4f986a96a3b7a" args="('Input euler rotation angle(s) not between 0 and 360 degrees') end Q" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">assign mu name for clarity if <a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a>* check that input m s constitute unit vector <a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a>* pi* check if rotation about euler vector is between and error           </td>
          <td>(</td>
          <td class="paramtype">'Input euler rotation angle(s) not between 0 and 360 degrees'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="50f7869e996fc52acbac674b8352aed2"></a><!-- doxytag: member="SpinCalc.m::error" ref="50f7869e996fc52acbac674b8352aed2" args="('Input euler vector(s) components do not constitute a unit vector') end if MU&lt; zeros(N" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">assign mu name for clarity if <a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a>* check that input m s constitute unit vector error           </td>
          <td>(</td>
          <td class="paramtype">'Input euler vector(s) components do not constitute a unit vector'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="03917dbd55c0ebe6fbff27c52e49d0f6"></a><!-- doxytag: member="SpinCalc.m::errordlg" ref="03917dbd55c0ebe6fbff27c52e49d0f6" args="('Warning:Input quaternion norm(s) deviate(s) from unity by more than tolerance') end end Q" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">number of orientations if if errordlg           </td>
          <td>(</td>
          <td class="paramtype">'Warning:Input quaternion norm(s) deviate(s) from unity by more than tolerance'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ebfa851c8af58da8bc15ed6634c8d1cf"></a><!-- doxytag: member="SpinCalc.m::errordlg" ref="ebfa851c8af58da8bc15ed6634c8d1cf" args="('Warning:Input DCM matrix determinant(s) off from 1 by more than tolerance.') end end DCM_flag=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end if errordlg           </td>
          <td>(</td>
          <td class="paramtype">'Warning:Input DCM matrix determinant(s) off from 1 by more than tolerance.'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="7bd20913ef58008a1f29aa529d092307"></a><!-- doxytag: member="SpinCalc.m::find" ref="7bd20913ef58008a1f29aa529d092307" args="(denom==max(denom), 1,'first')%determines max value of qtests to put in denominator case 1 Q(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">determine which Q equations maximize denominator switch find           </td>
          <td>(</td>
          <td class="paramtype">denom&nbsp;</td>
          <td class="paramname"> = <code>=max(denom)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">'first'&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="fb0c4e523f27f4e01f15b918e24c1a56"></a><!-- doxytag: member="SpinCalc.m::follows:NOTE:Output:follows:" ref="fb0c4e523f27f4e01f15b918e24c1a56" args="(near singularities flags,[NOTE] id orientations,[Output] id as,[follows] lower(CONVERSION to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">id follows:NOTE:Output:follows:           </td>
          <td>(</td>
          <td class="paramtype">near singularities&nbsp;</td>
          <td class="paramname"> <em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[NOTE] id&nbsp;</td>
          <td class="paramname"> <em>orientations</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">[Output] id&nbsp;</td>
          <td class="paramname"> <em>as</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="859fe483ef1b2cb3b60c8c45ad4fd749"></a><!-- doxytag: member="SpinCalc.m::fprintf" ref="859fe483ef1b2cb3b60c8c45ad4fd749" args="('Warning:Input DCM(s) matrix not orthogonal to precision tolerance.') end end clear perturbed DCM_flag Q" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end end end end if fprintf           </td>
          <td>(</td>
          <td class="paramtype">'Warning:Input DCM(s) matrix not orthogonal to precision tolerance.'&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="63d674a2e1704413a0bcf7ced67825e4"></a><!-- doxytag: member="SpinCalc.m::improper" ref="63d674a2e1704413a0bcf7ced67825e4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">'Error: Input DCM(s improper           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="15ed543820920ab86d1ddff006bdc6ce"></a><!-- doxytag: member="SpinCalc.m::INPUT" ref="15ed543820920ab86d1ddff006bdc6ce" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a> INPUT           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d4ed113be2b2780aa4d23d07a6a03ac5"></a><!-- doxytag: member="SpinCalc.m::ones" ref="d4ed113be2b2780aa4d23d07a6a03ac5" args="(N, 1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">assign mu name for clarity if <a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a> *check that input m s constitute unit vector <a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a> *pi * ones           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e41672582abde52b1fda6fd69bbcbb68"></a><!-- doxytag: member="SpinCalc.m::OUTPUT" ref="e41672582abde52b1fda6fd69bbcbb68" args="(ii, 1:4)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">for if OUTPUT           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1:4&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f3f46933dc5e07a176551ddbac84b343"></a><!-- doxytag: member="SpinCalc.m::perturbed" ref="f3f46933dc5e07a176551ddbac84b343" args="(ii, jj, kk)&gt;tol" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if for for for if perturbed           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#0ed892381b3cada12b0cb806289d0aef">jj</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#e9c83588c3b519e86d31c2d977ce16dc">kk</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="30f67a0432dd41ea1f574ab54fa3f55f"></a><!-- doxytag: member="SpinCalc.m::Q" ref="30f67a0432dd41ea1f574ab54fa3f55f" args="(1, 2,:).*Q(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">* Q           </td>
          <td>(</td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">:&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="e2c028f23edf3907aca571aa03060318"></a><!-- doxytag: member="SpinCalc.m::Q" ref="e2c028f23edf3907aca571aa03060318" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">1,4,: Q           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="1caf5889e40550fb9724cdc9036c29eb"></a><!-- doxytag: member="SpinCalc.m::Q" ref="1caf5889e40550fb9724cdc9036c29eb" args="(1, 1,:).*Q(1" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">* Q           </td>
          <td>(</td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">:&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8df71f6833fa784eae6b623e79dc13af"></a><!-- doxytag: member="SpinCalc.m::Q" ref="8df71f6833fa784eae6b623e79dc13af" args="(1, ii)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Q           </td>
          <td>(</td>
          <td class="paramtype">1&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8c8de8cd2cac52cc0a0f93f7eb33710b"></a><!-- doxytag: member="SpinCalc.m::Q" ref="8c8de8cd2cac52cc0a0f93f7eb33710b" args="(4, ii)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Q           </td>
          <td>(</td>
          <td class="paramtype">4&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="849929119f05c22867a5a240d8a907f8"></a><!-- doxytag: member="SpinCalc.m::Q" ref="849929119f05c22867a5a240d8a907f8" args="(3, ii)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Q           </td>
          <td>(</td>
          <td class="paramtype">3&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0d12ab88a44c946c6ddc0fe2dc078b00"></a><!-- doxytag: member="SpinCalc.m::Q" ref="0d12ab88a44c946c6ddc0fe2dc078b00" args="(2, ii)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Q           </td>
          <td>(</td>
          <td class="paramtype">2&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="cbebb7fd29c3ba141c66836c9ec7c09d"></a><!-- doxytag: member="SpinCalc.m::sin" ref="cbebb7fd29c3ba141c66836c9ec7c09d" args="(MU(ii, 1)/2)~=0" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">for if sin           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a>(<a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a>, 1)/&nbsp;</td>
          <td class="paramname"> <em>2</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [pure virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<div class="typeconstraint">
<dl compact><dt><b>Type Constraints</b><dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
</table>
</dl>
</div>

</div>
</div><p>
<a class="anchor" name="a28d2b0d7074eec95c9084501f6ca931"></a><!-- doxytag: member="SpinCalc.m::sin" ref="a28d2b0d7074eec95c9084501f6ca931" args="(MU/2)~" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if sin           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a>/&nbsp;</td>
          <td class="paramname"> <em>2</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="866ab28a6820ec61ca04ff96cca4096b"></a><!-- doxytag: member="SpinCalc.m::size" ref="866ab28a6820ec61ca04ff96cca4096b" args="(INPUT, 2)~" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end clear c1 <a class="el" href="SpinCalc_8m.html#2f07e0f444810cc4e54ee2be2ce0ac65">s1</a> <a class="el" href="SpinCalc_8m.html#869bd946456256c347112f5798b5b504">c2</a> <a class="el" href="SpinCalc_8m.html#2e63e71737e8b6802b81f6a7c5ca6a0a">s2</a> <a class="el" href="SpinCalc_8m.html#2350b882068fe45413b6048893702f73">c3</a> <a class="el" href="SpinCalc_8m.html#62909dec3830967c3ffff61bd5d4d3fa">s3</a> <a class="el" href="SpinCalc_8m.html#c9d7489a5a868e10b10518305e5425be">c13</a> <a class="el" href="SpinCalc_8m.html#42f126d3085add50391e5c92018fa2a9">s13</a> <a class="el" href="SpinCalc_8m.html#b043e012aa767ed885fcb8f300118085">c1_3</a> <a class="el" href="SpinCalc_8m.html#b31f90fe3731073540ea49fe690b5317">s1_3</a> <a class="el" href="SpinCalc_8m.html#69fc23ad21ce58652757ec5333cbad09">c3_1</a> <a class="el" href="SpinCalc_8m.html#cf22383c5c1ea7259855649924a564a6">s3_1</a> <a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a> <a class="el" href="SpinCalc_8m.html#ebf487f5d315cb61f0bd86455edff1fd">theta</a> <a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a> case Q if size           </td>
          <td>(</td>
          <td class="paramtype">INPUT&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">2&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">4 || <a class="code" href="SpinCalc_8m.html#866ab28a6820ec61ca04ff96cca4096b">size</a>(<a class="code" href="SpinCalc_8m.html#15ed543820920ab86d1ddff006bdc6ce">INPUT</a>,3)~=1
            <a class="code" href="SpinCalc_8m.html#50f7869e996fc52acbac674b8352aed2">error</a>(<span class="stringliteral">'Error: Input quaternion matrix is not Nx4'</span>)
</pre></div>
</div>
</div><p>
<a class="anchor" name="f544559f74ca73ba8fb38244ebdd9655"></a><!-- doxytag: member="SpinCalc.m::sqrt" ref="f544559f74ca73ba8fb38244ebdd9655" args="(INPUT(:, 1).^2+INPUT(:, 2).^2+INPUT(:, 3).^2)-ones(N" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">assign mu name for clarity if sqrt           </td>
          <td>(</td>
          <td class="paramtype">INPUT(:, 1).^2+INPUT(:, 2).^2+INPUT(:, 3).^&nbsp;</td>
          <td class="paramname"> <em>2</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="b6f3c269fc46c9c1c0f81b3431240138"></a><!-- doxytag: member="SpinCalc.m::__pad0__" ref="b6f3c269fc46c9c1c0f81b3431240138" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#b6f3c269fc46c9c1c0f81b3431240138">__pad0__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e31ac69c75bb42f47c8d6a7cde4937c6"></a><!-- doxytag: member="SpinCalc.m::__pad1__" ref="e31ac69c75bb42f47c8d6a7cde4937c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#e31ac69c75bb42f47c8d6a7cde4937c6">__pad1__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="cb405321a5c6ae16fef21290649f2666"></a><!-- doxytag: member="SpinCalc.m::__pad2__" ref="cb405321a5c6ae16fef21290649f2666" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#cb405321a5c6ae16fef21290649f2666">__pad2__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a6f626203c740423c9dfcbbe727f90b4"></a><!-- doxytag: member="SpinCalc.m::__pad3__" ref="a6f626203c740423c9dfcbbe727f90b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#a6f626203c740423c9dfcbbe727f90b4">__pad3__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a126f02bcfcec342fb72926c73b4aeb3"></a><!-- doxytag: member="SpinCalc.m::__pad4__" ref="a126f02bcfcec342fb72926c73b4aeb3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#a126f02bcfcec342fb72926c73b4aeb3">__pad4__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="445d93e639c02494afbdc5126d1d9f8a"></a><!-- doxytag: member="SpinCalc.m::__pad5__" ref="445d93e639c02494afbdc5126d1d9f8a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#445d93e639c02494afbdc5126d1d9f8a">__pad5__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d918d72d2eac09be60a9fc8847fe31a2"></a><!-- doxytag: member="SpinCalc.m::__pad6__" ref="d918d72d2eac09be60a9fc8847fe31a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#d918d72d2eac09be60a9fc8847fe31a2">__pad6__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="33068e38fda059166af20232a02d2b55"></a><!-- doxytag: member="SpinCalc.m::__pad7__" ref="33068e38fda059166af20232a02d2b55" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#33068e38fda059166af20232a02d2b55">__pad7__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5cfbf631ddc94882ec4e9aefed44a536"></a><!-- doxytag: member="SpinCalc.m::__pad8__" ref="5cfbf631ddc94882ec4e9aefed44a536" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#5cfbf631ddc94882ec4e9aefed44a536">__pad8__</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c9d7489a5a868e10b10518305e5425be"></a><!-- doxytag: member="SpinCalc.m::c13" ref="c9d7489a5a868e10b10518305e5425be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#c9d7489a5a868e10b10518305e5425be">c13</a> = cos((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>+<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b043e012aa767ed885fcb8f300118085"></a><!-- doxytag: member="SpinCalc.m::c1_3" ref="b043e012aa767ed885fcb8f300118085" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#b043e012aa767ed885fcb8f300118085">c1_3</a> = cos((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>-<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="869bd946456256c347112f5798b5b504"></a><!-- doxytag: member="SpinCalc.m::c2" ref="869bd946456256c347112f5798b5b504" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#869bd946456256c347112f5798b5b504">c2</a> = cos(theta./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2350b882068fe45413b6048893702f73"></a><!-- doxytag: member="SpinCalc.m::c3" ref="2350b882068fe45413b6048893702f73" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#2350b882068fe45413b6048893702f73">c3</a> = cos(phi./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="69fc23ad21ce58652757ec5333cbad09"></a><!-- doxytag: member="SpinCalc.m::c3_1" ref="69fc23ad21ce58652757ec5333cbad09" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#69fc23ad21ce58652757ec5333cbad09">c3_1</a> = cos((<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>-<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>)./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d56fd1f2de63b3ed9296d2aba8074442"></a><!-- doxytag: member="SpinCalc.m::DCM_flag" ref="d56fd1f2de63b3ed9296d2aba8074442" args="['EA', num2str(EULER_order_in),'to', OUTPUT_TYPE];%construct program conversion string for checking against user input elseif o_type==4 &amp;&amp;i_type~=4,%if output are euler angles but not input CC=[INPUT_TYPE,'to','EA', num2str(EULER_order_out)];%construct program conversion string for checking against user input elseif i_type==4 &amp;&amp;o_type==4,%if both input and output are euler angles CC=['EA', num2str(EULER_order_in),'to','EA', num2str(EULER_order_out)];%construct program conversion string end if strcmpi(CONVERSION, CC)==0;%check program conversion string against user input to confirm the conversion command error('Error:Invalid entry for CONVERSION input string');endendclear i_type o_type CC%From the input, determine the quaternions that uniquely describe the%rotation prescribed by that input.The output will be calculated in the%second portion of the code from these quaternions.switch INPUT_TYPE case 'DCM'if size(INPUT, 1)~=3||size(INPUT, 2)~=3%check DCM dimensions error('Error:DCM matrix is not 3x3xN');end N=size(INPUT, 3);%number of orientations%Check if matrix is indeed orthogonal perturbed=NaN(3, 3, N);DCM_flag=0;for ii=1:N, perturbed(:,:, ii)=abs(INPUT(:,:, ii)*INPUT(:,:, ii)'-eye(3));%perturbed array shows difference between DCM *DCM'and I if abs(det(INPUT(:,:, ii))-1)&gt; if determinant is off by one more than user is warned if" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end end end end if <a class="el" href="SpinCalc_8m.html#d56fd1f2de63b3ed9296d2aba8074442">DCM_flag</a> = 1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f7077ea6a64a2c954d88f0e6848ab7f8"></a><!-- doxytag: member="SpinCalc.m::denom" ref="f7077ea6a64a2c954d88f0e6848ab7f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">for denom = NaN(4,1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7f8e480875d8fdaebd739efe18fc2eba"></a><!-- doxytag: member="SpinCalc.m::EULER_order_in" ref="7f8e480875d8fdaebd739efe18fc2eba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elseif <a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a> = =121          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="429bbaab204238974f580e683e2cb46f"></a><!-- doxytag: member="SpinCalc.m::EULER_order_out" ref="429bbaab204238974f580e683e2cb46f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elseif <a class="el" href="SpinCalc_8m.html#429bbaab204238974f580e683e2cb46f">EULER_order_out</a> = =121          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="3824dd46422178131ae9ba0950cb6caf"></a><!-- doxytag: member="SpinCalc.m::Feb" ref="3824dd46422178131ae9ba0950cb6caf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function VA John Fuller nianet org Version <a class="el" href="SpinCalc_8m.html#3824dd46422178131ae9ba0950cb6caf">Feb</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="04d7174125b069e3d35c922196718668"></a><!-- doxytag: member="SpinCalc.m::ichk" ref="04d7174125b069e3d35c922196718668" args="['EA', num2str(EULER_order_in),'to', OUTPUT_TYPE];%construct program conversion string for checking against user input elseif o_type==4 &amp;&amp;i_type~=4,%if output are euler angles but not input CC=[INPUT_TYPE,'to','EA', num2str(EULER_order_out)];%construct program conversion string for checking against user input elseif i_type==4 &amp;&amp;o_type==4,%if both input and output are euler angles CC=['EA', num2str(EULER_order_in),'to','EA', num2str(EULER_order_out)];%construct program conversion string end if strcmpi(CONVERSION, CC)==0;%check program conversion string against user input to confirm the conversion command error('Error:Invalid entry for CONVERSION input string');endendclear i_type o_type CC%From the input, determine the quaternions that uniquely describe the%rotation prescribed by that input.The output will be calculated in the%second portion of the code from these quaternions.switch INPUT_TYPE case 'DCM'if size(INPUT, 1)~=3||size(INPUT, 2)~=3%check DCM dimensions error('Error:DCM matrix is not 3x3xN');end N=size(INPUT, 3);%number of orientations%Check if matrix is indeed orthogonal perturbed=NaN(3, 3, N);DCM_flag=0;for ii=1:N, perturbed(:,:, ii)=abs(INPUT(:,:, ii)*INPUT(:,:, ii)'-eye(3));%perturbed array shows difference between DCM *DCM'and I if abs(det(INPUT(:,:, ii))-1)&gt; if determinant is off by one more than user is warned if" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">number of orientations if <a class="el" href="SpinCalc_8m.html#04d7174125b069e3d35c922196718668">ichk</a> = =1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="bf9d47cd7d4fbc942e618bb1977019c2"></a><!-- doxytag: member="SpinCalc.m::ii" ref="bf9d47cd7d4fbc942e618bb1977019c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">for <a class="el" href="SpinCalc_8m.html#bf9d47cd7d4fbc942e618bb1977019c2">ii</a> = 1:3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="0ed892381b3cada12b0cb806289d0aef"></a><!-- doxytag: member="SpinCalc.m::jj" ref="0ed892381b3cada12b0cb806289d0aef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if for for for <a class="el" href="SpinCalc_8m.html#0ed892381b3cada12b0cb806289d0aef">jj</a> = 1:3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e9c83588c3b519e86d31c2d977ce16dc"></a><!-- doxytag: member="SpinCalc.m::kk" ref="e9c83588c3b519e86d31c2d977ce16dc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if for <a class="el" href="SpinCalc_8m.html#e9c83588c3b519e86d31c2d977ce16dc">kk</a> = 1:<a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f9d495c1655d813d553030485d00fea7"></a><!-- doxytag: member="SpinCalc.m::length" ref="f9d495c1655d813d553030485d00fea7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#f9d495c1655d813d553030485d00fea7">length</a> = size(CONVERSION,2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c81448d5c73a3cc9a41c90bc8415483e"></a><!-- doxytag: member="SpinCalc.m::MU" ref="c81448d5c73a3cc9a41c90bc8415483e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">case EV <a class="el" href="SpinCalc_8m.html#c81448d5c73a3cc9a41c90bc8415483e">MU</a> = INPUT(:,4)*pi/180          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1b1681fc73a9b5a3437ddd8100ba4299"></a><!-- doxytag: member="SpinCalc.m::N" ref="1b1681fc73a9b5a3437ddd8100ba4299" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end <a class="el" href="SpinCalc_8m.html#1b1681fc73a9b5a3437ddd8100ba4299">N</a> = size(INPUT,1)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="9702a4c625a53d56ec69bc3271cc6d6b"></a><!-- doxytag: member="SpinCalc.m::OUTPUT" ref="9702a4c625a53d56ec69bc3271cc6d6b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end OUTPUT          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">SpinCalc(CONVERSION,<a class="code" href="SpinCalc_8m.html#15ed543820920ab86d1ddff006bdc6ce">INPUT</a>,<a class="code" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a>,<a class="code" href="SpinCalc_8m.html#04d7174125b069e3d35c922196718668">ichk</a>)
%Function <span class="keywordflow">for</span> the conversion of one rotation input type to desired output.
%Supported conversion input/output types are as follows:
%   1: <a class="code" href="SpinCalc_8m.html#6a376f3700939431a3e2ff6782e20411">Q</a>        Rotation Quaternions
%   2: EV       Euler <a class="code" href="classVector.html" title="Class corresponding to the vector schema type.">Vector</a> and rotation angle (degrees)
%   3: DCM      Orthogonal DCM Rotation <a class="code" href="classMatrix.html" title="Class corresponding to the matrix schema type.">Matrix</a>
%   4: EA###    Euler angles (12 possible sets) (degrees)
%
%Author: John Fuller
%National Institute of Aerospace
%Hampton
</pre></div>
</div>
</div><p>
<a class="anchor" name="af40c223796354fb6b79c9ed047c513a"></a><!-- doxytag: member="SpinCalc.m::phi" ref="af40c223796354fb6b79c9ed047c513a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a> = INPUT(:,3)*pi/180          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="7f5635b58d789ed876db4b1b73bf1384"></a><!-- doxytag: member="SpinCalc.m::psi" ref="7f5635b58d789ed876db4b1b73bf1384" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">case EA if <a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a> = INPUT(:,1)*pi/180          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6a376f3700939431a3e2ff6782e20411"></a><!-- doxytag: member="SpinCalc.m::Q" ref="6a376f3700939431a3e2ff6782e20411" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">: Q = Q'          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e6f225fa5786243c8621def2bc9d863c"></a><!-- doxytag: member="SpinCalc.m::Qnorms" ref="e6f225fa5786243c8621def2bc9d863c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end clear INPUT INPUT_TYPE <a class="el" href="SpinCalc_8m.html#7f8e480875d8fdaebd739efe18fc2eba">EULER_order_in</a> Normalize quaternions in case of deviation from unity User has already been warned of deviation <a class="el" href="SpinCalc_8m.html#e6f225fa5786243c8621def2bc9d863c">Qnorms</a> = sqrt(sum(Q.*Q,2))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2f07e0f444810cc4e54ee2be2ce0ac65"></a><!-- doxytag: member="SpinCalc.m::s1" ref="2f07e0f444810cc4e54ee2be2ce0ac65" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#2f07e0f444810cc4e54ee2be2ce0ac65">s1</a> = sin(psi./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="42f126d3085add50391e5c92018fa2a9"></a><!-- doxytag: member="SpinCalc.m::s13" ref="42f126d3085add50391e5c92018fa2a9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#42f126d3085add50391e5c92018fa2a9">s13</a> = sin((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>+<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="b31f90fe3731073540ea49fe690b5317"></a><!-- doxytag: member="SpinCalc.m::s1_3" ref="b31f90fe3731073540ea49fe690b5317" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#b31f90fe3731073540ea49fe690b5317">s1_3</a> = sin((<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>-<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>)./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="2e63e71737e8b6802b81f6a7c5ca6a0a"></a><!-- doxytag: member="SpinCalc.m::s2" ref="2e63e71737e8b6802b81f6a7c5ca6a0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#2e63e71737e8b6802b81f6a7c5ca6a0a">s2</a> = sin(theta./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="62909dec3830967c3ffff61bd5d4d3fa"></a><!-- doxytag: member="SpinCalc.m::s3" ref="62909dec3830967c3ffff61bd5d4d3fa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#62909dec3830967c3ffff61bd5d4d3fa">s3</a> = sin(phi./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="cf22383c5c1ea7259855649924a564a6"></a><!-- doxytag: member="SpinCalc.m::s3_1" ref="cf22383c5c1ea7259855649924a564a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#cf22383c5c1ea7259855649924a564a6">s3_1</a> = sin((<a class="el" href="SpinCalc_8m.html#af40c223796354fb6b79c9ed047c513a">phi</a>-<a class="el" href="SpinCalc_8m.html#7f5635b58d789ed876db4b1b73bf1384">psi</a>)./2)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ebf487f5d315cb61f0bd86455edff1fd"></a><!-- doxytag: member="SpinCalc.m::theta" ref="ebf487f5d315cb61f0bd86455edff1fd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="SpinCalc_8m.html#ebf487f5d315cb61f0bd86455edff1fd">theta</a> = INPUT(:,2)*pi/180          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="ea3396f27de08dd170b9f4a9c430bbcf"></a><!-- doxytag: member="SpinCalc.m::tol" ref="ea3396f27de08dd170b9f4a9c430bbcf" args="['EA', num2str(EULER_order_in),'to', OUTPUT_TYPE];%construct program conversion string for checking against user input elseif o_type==4 &amp;&amp;i_type~=4,%if output are euler angles but not input CC=[INPUT_TYPE,'to','EA', num2str(EULER_order_out)];%construct program conversion string for checking against user input elseif i_type==4 &amp;&amp;o_type==4,%if both input and output are euler angles CC=['EA', num2str(EULER_order_in),'to','EA', num2str(EULER_order_out)];%construct program conversion string end if strcmpi(CONVERSION, CC)==0;%check program conversion string against user input to confirm the conversion command error('Error:Invalid entry for CONVERSION input string');endendclear i_type o_type CC%From the input, determine the quaternions that uniquely describe the%rotation prescribed by that input.The output will be calculated in the%second portion of the code from these quaternions.switch INPUT_TYPE case 'DCM'if size(INPUT, 1)~=3||size(INPUT, 2)~=3%check DCM dimensions error('Error:DCM matrix is not 3x3xN');end N=size(INPUT, 3);%number of orientations%Check if matrix is indeed orthogonal perturbed=NaN(3, 3, N);DCM_flag=0;for ii=1:N, perturbed(:,:, ii)=abs(INPUT(:,:, ii)*INPUT(:,:, ii)'-eye(3));%perturbed array shows difference between DCM *DCM'and I if abs(det(INPUT(:,:, ii))-1)&gt;" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if for for for if if any difference is larger than <a class="el" href="SpinCalc_8m.html#ea3396f27de08dd170b9f4a9c430bbcf">tol</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sun Aug 16 16:38:39 2009 for cspinach by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
